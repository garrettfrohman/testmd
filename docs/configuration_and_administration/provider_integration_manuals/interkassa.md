---
id: "interkassa"
title: "Interkassa"
hide_title: "true"
---

![](/img/providers/logos/interkassa.png)

# Interkassa

## About
Interkassa is a payment provider offering the following credit card operations: 3DS Payment, full/partial Refund, Payout, Reversal and Status Check.

Also the following Indian payment methods are supported:

### PAY IN:
- NetBanking
- UPI
- Wallet: PhonePe, Freecharge, Ola, JioMoney,  Mobikwik, PayTM, Airtel Money

### PAY OUT
- UPI
- Bank Transfer

| Provider Name                | Interkassa                                                                                                                                                                      |
|------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Link                         | [https://www.interkassa.com/](https://www.interkassa.com/)                                                                                                                      |
| Classification               | Debit/Credit Card Processor, Online Banking, Wallet                                                                                                                             |
| Regions                      | `Europe`, `Asia`, `CIS`, `India`                                                                                                                                                |
| Currencies                   | `UAH`, `KZT`, `EUR`, `USD`, `GBP` `INR`                                                                                                                                         |
| Methods/PaymentTxTypes       | `CreditcardDeposit` <br/> `BankDeposit` <br/> `WalletDeposit` <br/> `CreditcardWithdrawal` <br/> `WalletWithdrawal` <br/> `Refund` <br/> `BankLocalWithdrawal` <br/> `Reversal` |
| PaymentIQ Configuration File | `InterkassaConfig`                                                                                                                                                              |

## Configuration Information

<details>
<summary>Click to view example configuration</summary>
<br/>

```xml
<com.devcode.paymentiq.integration.interkassa.InterkassaConfig>
  <enabled>true</enabled>
  <useViqProxy>true</useViqProxy>
  <accounts>
    <entry>
      <string>DEFAULT</string>
      <account>
        <customerId>??</customerId> <!-- API User ID -->
        <apiKey>??</apiKey>         <!-- API Key -->
        <secretKey>??</secretKey>   <!-- Sign Key -->
        <accountID>??</accountID>   <!-- Business Account ID -->
        <checkoutId>??</checkoutId> <!-- Kassa ID -->
        <walletId>??</walletId>     <!-- Purse/Wallet ID -->
        <method>card</method>       <!-- card, bitcoin, qiwi -->
        <use3Dsecure>true</use3Dsecure>
        <defaultDescriptor>payment description goes here</defaultDescriptor>
        <supportedCurrencies>UAH|KZT|EUR|USD|GBP</supportedCurrencies>
      </account>
    </entry>
  </accounts>
  <testMode>false</testMode>
  <paywayMapping>VISA->visa,MASTERCARD->mastercard</paywayMapping>
  <defaultDescriptor>payment description goes here</defaultDescriptor>
</com.devcode.paymentiq.integration.interkassa.InterkassaConfig>
```

</details>

### Attributes

| Attribute                 | Description                                                                                                                                                                                                                                                                                                                             |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| account.customerId        | Corresponds to the `API User ID` from the Interkassa that is used to generate `Authorization` header. It can be found in the Interkassa portal.                                                                                                                                                                                         |
| account.apiKey            | Corresponds to the `API Key` from the Interkassa that is used to generate `Authorization` header. It must be generated by the merchant for the first time (see below how to create and then retrieve it).                                                                                                                               |
| account.secretKey         | Corresponds to the `Sign Key` from the Interkassa that is used to generate request signature. It can be found in the Interkassa portal.                                                                                                                                                                                                 |
| account.accountID         | Corresponds to the `Ik-Api-Account-Id` request header (see below how to retrieve it).                                                                                                                                                                                                                                                   |
| account.checkoutId        | Corresponds to the kassa identifier in the Interkassa system. It is the ID of your "checkout" to which funds are credited. You can have multiple such checkouts defined.                                                                                                                                                                |
| account.walletId          | Corresponds to the wallet ID that is required for payout operations only. It is sent as a `purseId` payout request parameter.                                                                                                                                                                                                           |
| account.method            | Optional parameter, corresponding to the payment method (card, bitcoin. qiwi, ...). In case of Creditcard payment, "card" will be used by default.                                                                                                                                                                                      |
| account.defaultDescriptor | Can be used to define a payment description (for this account only; it has a higher priotiry than config-level `defaultDescriptor`)                                                                                                                                                                                                     |
| account.doDefaultRedirect | Optional parameter, that can be used to indicate that `ik_result_url` is enabled by Interkassa during checkout configuration. It will be used to handle redirection flow properly.<br/>Once it is enabled by Interkassa, you will need to add `<doDefaultRedirect>false</doDefaultRedirect>` to your account in the `InterkassaConfig`. |
| paywayMapping             | It is used to configure mapping for different payment channels defined at Interkassa side. For different card types (VISA, MASTERCARD) and different currencies, different payment channels can be configured. Please double check with Interkassa which payment channels are enabled and can be used for your account(s).<br/>The following payment channels are available now: `visa`, `mastercard`, `card`. By default the following payment channel mapping is defined in the `InterkassaConfig`: `VISA->visa,MASTERCARD->mastercard` (in such case one payment channel will be used for all currencies). You can also specify different payment channel for different currency e.g. `VISA_UAH->aaa,MASTERCARD_UAH->bbb`.<br/>If non default payment channel will be used, it must be specified in the `InterkassaConfig`.
| defaultDescriptor         | Can be used to define a payment description (one for all accounts defined in the `InterkassaConfig`) |

### API User ID and API Key

`API User ID` and `API Key` can be found in the Interkassa back office in the API section:

![](/img/providers/interkassa-api.png)

At the beginning `API Key` is empty, so you will need to generate it.<br/>
In the future, if the project is configured, it is not recommended to change the key, as it can break the work of the configured project.

### Sign Key

It can be found in the Interkassa back office after accessing **My checkouts** > **Settings**:

![](/img/providers/interkassa-checkout.png)

and

![](/img/providers/interkassa-sign-key.png)

### Ik-Api-Account-Id

Execute this `GET` request to get all available accounts (including business account):

```
curl -X GET https://api.interkassa.com/v1/account -H 'Authorization: Basic {header}'
```

where

```
header = encodeBase64("{API User ID}:{API Key}");
```

**Note**: see below, where you can find `API User ID` and `API Key`.

In the response you will get all available accounts, and you will need a business account e.g. `"_id": "620bb252a888ad66f31d2fa1"` (see below):

```json
{
  "status": "ok",
  "code": 0,
  "data": {
    "620bb252a888ad66f31d2fa1": {
      "_id": "620bb252a888ad66f31d2fa1",
      "nm": "Business cabinet",
      "tp": "b",
      "usr": [
        {
          "id": "620bb219b4a69e4a9f05b3ed",
          "o": "1",
          "rl": "b_o"
        }
      ]
    },
    "620bb252a888ad66f31d2fa0": {
      "_id": "620bb252a888ad66f31d2fa0",
      "nm": "Personal cabinet",
      "tp": "c",
      "usr": [
        {
          "id": "620bb219b4a69e4a9f05b3ed",
          "o": "1",
          "rl": "c_o"
        }
      ]
    }
  }
}
```

### Kassa Identifier

You can find your kassa/checkout in the Interkassa back office at https://www.interkassa.com/account/checkout:

![](/img/providers/interkassa-checkout.png)

### Wallet ID (purseId)

Execute this `GET` request to get a list of all available wallets at your kassa/checkout:

```
curl -X GET https://api.interkassa.com/v1/purse -H 'Authorization: Basic {header}'
```

You should get a response

```json
{
  "status": "ok",
  "code": 0,
  "data": {
    "302120998124": {
      "id": "302120998124",
      "accountId": "620bb252a888ad66f31d2fa1",
      "type": "c",
      "name": "Bambora UAH",
      "status": "1",
      "balance": "21.0000",
      "frozen": "0.0000",
      "turnover": "96.0000",
      "settings": {
        "co": "620bb8ed61a8e529093dea5e"
      },
      "created": "2022-02-15 16:30:06",
      "blockedAmount": "0"
    }
  }
}
```
where `"id": "302120998124"` is your `purseId`.

### PSP Payment Method to TxType mapping

Table below shows which tx type (`TxType`) and service (`Service`) parameter should be used to trigger a specific payment method.

| PSP Payment Method   | TxType               | Service     | Input Fields                                        |
|----------------------|----------------------|-------------|-----------------------------------------------------|
| Credit Card Deposit  | CreditcardDeposit    |             | credit card related info with CVC/CVV               |
| Credit Card Payout   | CreditcardWithdrawal |             | credit card related info witout CVC/CVV             |
| Bank Transfer Payout | BankLocalWithdrawal  |             | input.accountNumber<br/>input.clearingNumber (IFSC) |
| Wallet Bank Deposit  | WalletDeposit        | WALLET      | input.walletAccount                                 |
| Net Banking Deposit  | BankDeposit          | NET_BANKING | input.bankName                                      |
| UPI Deposit          | WalletDeposit        | UPI         | input.walletAccount                                 |
| UPI Withdrawal       | WalletWithdrawal     | UPI         | input.walletAccount                                 |

Refund for credit card deposit is also supported and can be performed either from PaymentIQ back office ("Investigate" tab, and then "Update > Refund/Partial Refund") or by using the [Admin API Refund](../../apis_and_integration/admin_api/admin_api_refund) method

### How to Configure

#### Enable host-to-host (h2h) mode

Please contact Interkassa and check if h2h mode is enabled for your account as it is required in order to use a credit card payment options.

#### Callback URLs

Callback URL for DEPOSIT is dynamic and is configured automatically in the request. In order to do it, you will need to enable it for `Interaction URL` like it is shown below.<br/>

![](/img/providers/interkassa-callback-withdrawal.png)

Deposit callback URLs example:

TEST: `https://test-api.paymentiq.io/paymentiq/api/interkassa/callback/{txRefId}`<br/>
LIVE: `https://api.paymentiq.io/paymentiq/api/interkassa/callback/{txRefId}`<br/>

where `txRefId` - is a unique tx identifier in PaymentIQ (we send it also as a `ik_pm_no` request parameter).

Callback URL for WITHDRAWAL can be set in the Interkassa back office at your checkout settings (see "Interaction URL for withdraw" section on Interface tab below):

Withdrawal callback URLs example:

TEST: `https://test-api.paymentiq.io/paymentiq/api/interkassa/callback`<br/>
PROD: `https://api.paymentiq.io/paymentiq/api/interkassa/callback`

#### Enable 3DS2 (Send Browser Fingerprint in the Request)

In order to send browser related information (Browser Fingerprint) in the request, you will need to enable 3DS2 in PaymentIQ back office. It can be done in the `Rules > Routing > 3DS2 Routing` section, like it is shown below (it is advised to ask PaymentIQ technical support to do it):

![](/img/providers/interkassa-3ds2-routing.png)

It is a merchant specific configuration (it must be configured for a specific PaymentIQ merchant ID), that will be valid for all accounts, defined in their `InterkassaConfig`, also it will be valid for all accounts, defined for all merchant's sub MIDs.
Also, it is possible to have different configuration for a specific merchant's account (e.g. if you need different 3DS provider to be configured for different account).<br/>
So, it is possible to have one configuration for all merchant's account or separate configuration - for a specific merchant's account.

#### Configure in PaymentIQ: Wallet Deposit (service=WALLET)

1. **MerchantConfig**: add **WALLET** service in the **WALLET** mapping
```xml
<entry>
  <string>WALLET</string>
  <string>UPI|WALLET</string>
</entry>
```
2. **Rules > Payment Methods**: enable **WALLET-WALLET** deposit option.<br/>

**Note:** Merchant will need to define wallet numbers dropdown list (see "Interkassa Wallets" definition above) on their side if PaymentIQ Cashier will not be used.<br/>

#### Configure in PaymentIQ: Net Banking Deposit
1. **MerchantConfig**: add **NET_BANKING** service in the **BANK** mapping
```xml
<entry>
  <string>BANK</string>
  <string>NET_BANKING|...</string>
</entry>
```
2. **Rules > Payment Methods**: enable **BANK-INTERKASSA_NET_BANKING** deposit option.<br/>
3. Configure the Cashier Payment Method-settings with `Input Html Template Name` as `interkassa-deposit-banks`:

![](/img/providers/interkassa-paymentmethod.png)

#### Configure in PaymentIQ: Wallet Deposit (service=UPI)
1. **MerchantConfig**: add **UPI** service in the **WALLET** mapping
```xml
<entry>
  <string>WALLET</string>
  <string>UPI|WALLET</string>
</entry>
```
2. **Rules > Payment Methods**: enable **WALLET-UPI** deposit option.<br/>

**Note:**<br/>
UPI wallet number should have the following format: name@bankname (from 5 to 45 symbols), where name - digits and letters.<br/>
Example: 5871670381@paytm<br/>

4. Add translations<br/>

| Key                       | Text                  |
|---------------------------|-----------------------|
| wallet.main.walletAccount | Wallet Account Number |

#### Configure in PaymentIQ: Wallet Withdrawal (service=UPI)
1. **MerchantConfig**: add **UPI** service in the **WALLET** mapping
```xml
<entry>
  <string>WALLET</string>
  <string>UPI|WALLET</string>
</entry>
```
2. **Rules > Payment Methods**: enable **WALLET-UPI** withdrawal option.<br/>

**Note:**<br/>
UPI wallet number should have the following format: name@bankname (from 5 to 45 symbols), where name - digits and letters.<br/>
Example: 5871670381@paytm<br/>

4. Add translations (see above).

#### Configure in PaymentIQ: Bank Transfer Withdrawal

Please use `BankLocalWithdrawal` tx type and specify `IFSC` code using `cleaaringNumber` field.

## Example Routing Rule

Credit card operations:

![](/img/providers/routing/interkassa-cards.png)

Indian payment methods:

![](/img/providers/routing/interkassa-apms.png)

## Test Information

There is no TEST env. and testing can be made using real cards and bank related info.
