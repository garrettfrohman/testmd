--- 
id: "2019-04-02_PIQ_1.3.94"
title: "1.3.94 | 2019-04-02"
--- 


| #    | Tracker      | Subject                                                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------|--------------|----------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 8509 | Improvement  | Add country codes for Saint Barthélemy                                     | Added alpha-2 and -3 codes as well as the numeric three-digit code for Saint Barthélemy.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 8507 | Improvement  | Skrill - More descriptive null pointer exception message in status command | Added a more descriptive null pointer exception message in status command in case the AbstractSkrillCallbackInput is null (and the status polling job should be used instead by enabling the "useMQI" tag in SkrillConfig.)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 8473 | Improvement  | Velocity rules does not consider the right order of rules                  | **Problem**<br/> - PaymentIQ check all actions for all available rules by considering (max tx sum, max no tx,..). <br/> - PaymentIQ finds the results for these actions (rules)--> calculate exceedMaxNoTx, exceedMaxTxSum, exceedMinTxSum, exceedMaxUserBal based on their first matched rules.<br/> - If we got results for these actions, PaymentIQ do a match for the rules based on the first matched one based on rule conditions.<br/> This way, PaymentIQ might have a couple of actions (exceedMaxNoTx, exceedMaxTxSum, exceedMinTxSum, exceedMaxUserBal) that are matched. Yet, we get the first matched rules action (decline or accept) based on the matching of the conditions.<br/><br/> **Solution**<br/> - Instead of matching the rules based on the first matched one based on rules conditions and take it directly without considering the matched actions (exceedMaxNoTx, exceedMaxTxSum, exceedMinTxSum, exceedMaxUserBal), PaymentIQ should get a matched list of these rules based on the conditions. Then, go in the right order and match them based on what PaymentIQ got from the list of matched rules based on the actions (exceedMaxNoTx, exceedMaxTxSum, exceedMinTxSum, exceedMaxUserBal). Consequently, we will be able to get the right first matched rule based on it's conditions and actions. Hence, PaymentIQ will take the right action (accept or decline)<br/><br/> To activate this, you need to have the following in the MerchantConfig:<br/><br/> `<activeFirstVelocityRuleMatching>true</activeFirstVelocityRuleMatching>` |
| 8470 | Bug          | Fix handling of SkrillQCOWithdrawal callbacks                              | Resolved an issue with `SkrillQCOWithdrawal` callbacks where PaymentIQ would decline the callback due to fraud because of formatting issues. These caused a mismatch and gave error "Callback amount differs from tx amount".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 8468 | Task         | Siru - implement standard redirects for pending and cancelUrl              | Added support for Siru to be able to handle pending and cancelUrls.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 8363 | New Provider | Adyen new API (including EPS and Sofort)                                   | Implemented the new Adyen API and added support for Sofort and EPS APMs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |